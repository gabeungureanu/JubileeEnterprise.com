<UserControl x:Class="JubileeVibes.Views.Shell.ShellView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:shell="clr-namespace:JubileeVibes.Views.Shell"
             xmlns:pages="clr-namespace:JubileeVibes.Views.Pages"
             xmlns:vm="clr-namespace:JubileeVibes.ViewModels.Pages"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="1400"
             Background="{StaticResource BackgroundPrimaryBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="72" MinWidth="72" MaxWidth="72"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- Compact Left Sidebar (Icon-only) -->
        <shell:SidebarView Grid.Row="0" Grid.Column="0"/>

        <!-- Main Content Area -->
        <Border Grid.Row="0" Grid.Column="1"
                Background="{StaticResource BackgroundSecondaryBrush}"
                CornerRadius="8"
                Margin="0,8,0,8">
            <ContentControl x:Name="ContentArea"
                            Content="{Binding CurrentPageViewModel}">
                <ContentControl.Resources>
                    <DataTemplate DataType="{x:Type vm:HomeViewModel}">
                        <pages:HomeView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type vm:SearchViewModel}">
                        <pages:SearchView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type vm:LibraryViewModel}">
                        <pages:LibraryView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type vm:PlaylistViewModel}">
                        <pages:PlaylistView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type vm:AlbumViewModel}">
                        <pages:AlbumView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type vm:ArtistViewModel}">
                        <pages:ArtistView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type vm:SettingsViewModel}">
                        <pages:SettingsView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type vm:AccountViewModel}">
                        <pages:AccountView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type vm:QueueViewModel}">
                        <pages:QueueView/>
                    </DataTemplate>
                </ContentControl.Resources>
            </ContentControl>
        </Border>

        <!-- Right Panel: Now Playing Details -->
        <Border Grid.Row="0" Grid.Column="2"
                Background="{StaticResource BackgroundSecondaryBrush}"
                CornerRadius="8"
                Margin="8,8,8,8"
                Width="350"
                Visibility="{Binding ShowNowPlayingPanel, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Visible}">
            <shell:NowPlayingPanelView DataContext="{Binding NowPlayingBarViewModel}"/>
        </Border>

        <!-- Now Playing Bar -->
        <shell:NowPlayingBarView Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3"/>
    </Grid>
</UserControl>
